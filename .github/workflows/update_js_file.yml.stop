name: Browserify build
on:
  push:
    branches:
      - master
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        run: git checkout gh-pages

      - name: Build
        working-directory: ./assets
        run: |
          npm install
          npm update citysdk
          npx browserslist@latest --update-db
          npm run build
          
      - name: Commit updates
        uses: EndBug/add-and-commit@v9
        with:
          author_name: bot
          author_email: bot@example.com
          message: "browserify build"
          add: "*.js*"
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
